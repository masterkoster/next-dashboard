generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(uuid())
  email            String    @unique @db.NVarChar(255)
  name             String?   @db.NVarChar(255)
  password         String?   @db.NVarChar(255)
  purchasedModules String    @default("[]") @db.NVarChar(Max)
  credits          Int       @default(0)
  createdAt        DateTime  @default(now()) @db.DateTime2
  updatedAt        DateTime  @updatedAt @db.DateTime2
  
  // Password reset fields
  resetToken       String?   @db.NVarChar(255)
  resetTokenExpiry DateTime? @db.DateTime2

  // User's aircraft
  aircraft         UserAircraft[]

  @@map("User")
}

model UserAircraft {
  id          String   @id @default(uuid())
  userId      String
  nNumber     String   @db.NVarChar(10)
  nickname    String?  @db.NVarChar(100)
  notes       String?  @db.NVarChar(Max)
  createdAt   DateTime @default(now()) @db.DateTime2
  updatedAt   DateTime @updatedAt @db.DateTime2

  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("UserAircraft")
}

model AircraftMaster {
  nNumber        String  @id @map("N_NUMBER") @db.NVarChar(10)
  name           String? @map("NAME") @db.NVarChar(255)
  typeRegistrant String? @map("TYPE_REGISTRANT") @db.NVarChar(50)
  lastActionDate String? @map("LAST_ACTION_DATE") @db.NVarChar(50)
  airWorthDate   String? @map("AIR_WORTH_DATE") @db.NVarChar(50)
  mfr            String? @map("MFR") @db.NVarChar(255)
  model          String? @map("MODEL") @db.NVarChar(255)
  serialNumber   String? @map("SERIAL_NUMBER") @db.NVarChar(255)
  engMfr         String? @map("ENG_MFR") @db.NVarChar(255)
  engineModel    String? @map("ENGINE_MODEL") @db.NVarChar(255)
  engCount       Int?    @map("ENG_COUNT") @db.Int
  statusCode     String? @map("STATUS_CODE") @db.NVarChar(50)

  @@map("AircraftMaster")
}

model AircraftPerformance {
  id              Int     @id @default(autoincrement())
  designation     String  @db.VarChar(100)
  manufacturer    String? @db.VarChar(100)
  model           String? @db.VarChar(100)
  
  // TLAR
  eis             String? @db.VarChar(50)
  maxpax          Int?
  pax             Int?
  
  // Performance
  range_nm        String? @db.VarChar(50)
  tofl            String? @db.VarChar(50)
  
  // Weight
  mrw             String? @db.VarChar(50)
  mtow            String? @db.VarChar(50)
  mlw             String? @db.VarChar(50)
  mzfw            String? @db.VarChar(50)
  oew             String? @db.VarChar(50)
  fuel            String? @db.VarChar(50)
  
  // Propulsion
  engine_designation String? @db.VarChar(100)
  alternate_engines  String? @db.VarChar(100)
  num_engines        Int?
  thrust_sls         String? @db.VarChar(50)
  thrust_max         String? @db.VarChar(50)
  fuel_type          String? @db.VarChar(50)
  fuel_density       String? @db.VarChar(50)
  fuel_cap_usable    String? @db.VarChar(50)
  fuel_cap_unusable  String? @db.VarChar(50)
  
  // Aero
  span_ft         String? @db.VarChar(50)
  length_ft       String? @db.VarChar(50)
  height_ft       String? @db.VarChar(50)
  tip_chord       String? @db.VarChar(50)
  sweep_deg       String? @db.VarChar(50)
  root_chord      String? @db.VarChar(50)
  wing_area       String? @db.VarChar(50)
  wingtip_device  String? @db.VarChar(50)
  mac             String? @db.VarChar(50)
  
  // Velocities
  vmo_mo          String? @db.VarChar(50)
  vc_cruise       String? @db.VarChar(50)
  v_takeoff       String? @db.VarChar(50)
  
  // Altitudes
  cruise_alt      String? @db.VarChar(50)
  
  created_at      DateTime? @default(now()) @db.DateTime2

  @@map("AircraftPerformance")
}

model AircraftSpecs {
  id                      Int     @id @default(autoincrement())
  manufacturer            String  @db.NVarChar(100)
  model                   String  @db.NVarChar(255)
  
  // Dimensions
  length_ft               String? @db.NVarChar(50)
  wingspan_ft             String? @db.NVarChar(50)
  height_ft               String? @db.NVarChar(50)
  
  // Takeoff/Landing
  takeoff_ground_roll_ft  String? @db.NVarChar(50)
  takeoff_over_50ft_ft    String? @db.NVarChar(50)
  landing_ground_roll_ft  String? @db.NVarChar(50)
  landing_over_50ft_ft    String? @db.NVarChar(50)
  
  // Speeds
  top_speed_kts           String? @db.NVarChar(50)
  cruise_speed_kts        String? @db.NVarChar(50)
  stall_speed_dirty_kts   String? @db.NVarChar(50)
  stall_speed_clean_kts   String? @db.NVarChar(50)
  
  // Weights
  empty_weight_lbs        String? @db.NVarChar(50)
  gross_weight_lbs        String? @db.NVarChar(50)
  
  // Range & Fuel
  range_nm                String? @db.NVarChar(50)
  fuel_capacity_gal       String? @db.NVarChar(50)
  
  // Engine
  horsepower              String? @db.NVarChar(50)
  
  // Performance
  rate_of_climb_fpm       String? @db.NVarChar(50)
  service_ceiling_ft     String? @db.NVarChar(50)
  
  // Metadata
  source_url              String? @db.NVarChar(500)
  scraped_at              DateTime? @db.DateTime2

  @@map("AircraftSpecs")
}
